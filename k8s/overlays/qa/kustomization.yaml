# -----------------------------------------------------------
# üß† What this file does
# -----------------------------------------------------------
# This file defines how to build the Kubernetes configuration for the QA environment.
# It tells Kustomize:
#   - Use the shared "base" setup (common to all environments)
#   - Add "qa-" to the start of all resource names (so QA resources don‚Äôt clash with Dev or Prod)
#   - Apply the QA-specific replica patch (to scale pods to 2 replicas)
#
# Essentially, this file says:
# ‚ÄúTake the base setup and adjust it to create the QA version.‚Äù
#
# This file creates the QA version of the app‚Äôs Kubernetes setup by:
# 1Ô∏è‚É£ Starting from the shared base files.
# 2Ô∏è‚É£ Adding a ‚Äúqa-‚Äù prefix to every resource name.
# 3Ô∏è‚É£ Applying a small patch that sets the number of replicas to 2.
# 
# It ensures QA runs separately from Dev and Prod, while reusing the same base logic.
# -----------------------------------------------------------

apiVersion: kustomize.config.k8s.io/v1beta1   # The Kustomize API version
kind: Kustomization                            # This is a Kustomization file ‚Äî it tells Kustomize how to assemble manifests

resources:
  - ../../base                                 # Reuse everything from the shared base (Deployment, Service)

namePrefix: qa-                                # üß© Add "qa-" in front of every resource name (e.g., myservice ‚Üí qa-myservice)
                                                # This keeps QA isolated from other environments

patches:
  - path: replica-patch.yaml                    # üß© Apply the QA-specific patch file (sets replicas: 2)
